package main

import (
	"testing"

	"github.com/ethereum/go-ethereum/common"
)

func TestSendTx(t *testing.T) {

	t.Log("RPC:", globalConfig.RPC)
	t.Log("addr", globalConfig.TargetContract)

	// "withdrawDelegate(address,address,uint256,bytes32,uint256,uint256,uint256,bytes)": "f49b8e8b"
	data := common.Hex2Bytes("0xf49b8e8b0000000000000000000000006ecb1e890b68dfa299ddd4856cf30a3d38867b4700000000000000000000000002096654b0f3597a6760d29370b2199e8c08e73000000000000000000000000000000000000000000000000000000000000000c80000000000000000000000006ecb1e890b68dfa299ddd4856cf30a3d38867b470000000000000000000000000000000000000000000000000000000000000061000000000000000000000000000000000000000000000000000000000000006100000000000000000000000000000000000000000000000000000000642440fa000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000414c33f2be6fec340264b279f40280346a453dd5444b7d01838f2b7d8f726ee9f35506ed3183379980ea05989b6e5a5a99af92b18ade383f2c82e025ad1a15f7521b00000000000000000000000000000000000000000000000000000000000000")

	// 0xf49b8e8b
	// 0000000000000000000000006ecb1e890b68dfa299ddd4856cf30a3d38867b47
	// 00000000000000000000000002096654b0f3597a6760d29370b2199e8c08e730
	// 00000000000000000000000000000000000000000000000000000000000000c8
	// 0000000000000000000000006ecb1e890b68dfa299ddd4856cf30a3d38867b47
	// 000000000000000000000000000000000000000000000000000000000000006100000000000000000000000000000000000000000000000000000000000000d40000000000000000000000000000000000000000000000000000000064242c0b00000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000041cde7d941756d34972321a5b38fbe2d89264f88c11133821d64d6fe116af45e1e5d428aaf658a4bfa8a3d1fe25cf3fea675075b87b3d0de8ae03fe83fd862eced1b00000000000000000000000000000000000000000000000000000000000000

	txHash, err := sendTransaction(globalConfig.TargetContract, data)

	if err != nil {
		t.Errorf("sendTransaction failed: %v", err)
	}
	t.Log(txHash)
}
